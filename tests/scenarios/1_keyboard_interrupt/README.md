# 시나리오 1: KeyboardInterrupt 중단 시 파일 손상

## 🔍 문제 설명

데이터 저장 중 사용자가 `Ctrl+C`로 강제 종료하면, `df.to_parquet()`로 생성 중이던 파일이 
깨진 상태로 남을 수 있습니다. 이는 후속 파이프라인에서 오류를 발생시킬 수 있는 위험 요소입니다.

## ⚠️ before.py

- 일반 `pandas.to_parquet()` 사용
- 중간에 인터럽트 시 깨진 `.parquet` 파일이 남을 수 있음
- 예외 처리 또는 롤백 없음

## ✅ after.py

- `atomicwriter` 라이브러리 사용
- 임시 디렉토리에 먼저 저장 후, 성공한 경우에만 대상 파일로 이동
- 중단되면 임시 파일은 자동 삭제 → 파일 무결성 유지

## 💡 테스트 방법

1. `before.py` 실행 후 `"저장 시작"` 메시지 뜨면 `Ctrl+C` 입력
2. `after.py`도 동일하게 실행 및 중단 실험
3. `data/output.parquet` 파일이 남아 있는지, 손상되었는지 비교